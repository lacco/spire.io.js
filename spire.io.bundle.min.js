var require=function(a,b){var c=require.resolve(a,b||"/"),d=require.modules[c];if(!d)throw new Error("Failed to resolve module "+a+", tried "+c);var e=d._cached?d._cached:d();return e};require.paths=[],require.modules={},require.extensions=[".js",".coffee"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(a,b){function g(a){if(require.modules[a])return a;for(var b=0;b<require.extensions.length;b++){var c=require.extensions[b];if(require.modules[a+c])return a+c}}function h(a){a=a.replace(/\/+$/,"");var b=a+"/package.json";if(require.modules[b]){var d=require.modules[b](),e=d.browserify;if(typeof e=="object"&&e.main){var f=g(c.resolve(a,e.main));if(f)return f}else if(typeof e=="string"){var f=g(c.resolve(a,e));if(f)return f}else if(d.main){var f=g(c.resolve(a,d.main));if(f)return f}}return g(a+"/index")}function i(a,b){var c=j(b);for(var d=0;d<c.length;d++){var e=c[d],f=g(e+"/"+a);if(f)return f;var i=h(e+"/"+a);if(i)return i}var f=g(a);if(f)return f}function j(a){var b;a==="/"?b=[""]:b=c.normalize(a).split("/");var d=[];for(var e=b.length-1;e>=0;e--){if(b[e]==="node_modules")continue;var f=b.slice(0,e+1).join("/")+"/node_modules";d.push(f)}return d}b||(b="/");if(require._core[a])return a;var c=require.modules.path(),d=b||".";if(a.match(/^(?:\.\.?\/|\/)/)){var e=g(c.resolve(d,a))||h(c.resolve(d,a));if(e)return e}var f=i(a,d);if(f)return f;throw new Error("Cannot find module '"+a+"'")}}(),require.alias=function(a,b){var c=require.modules.path(),d=null;try{d=require.resolve(a+"/package.json","/")}catch(e){d=require.resolve(a,"/")}var f=c.dirname(d),g=(Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b})(require.modules);for(var h=0;h<g.length;h++){var i=g[h];if(i.slice(0,f.length+1)===f+"/"){var j=i.slice(f.length);require.modules[b+j]=require.modules[f+j]}else i===f&&(require.modules[b]=require.modules[f])}},require.define=function(a,b){var c=require._core[a]?"":require.modules.path().dirname(a),d=function(a){return require(a,c)};d.resolve=function(a){return require.resolve(a,c)},d.modules=require.modules,d.define=require.define;var e={exports:{}};require.modules[a]=function(){return require.modules[a]._cached=e.exports,b.call(e.exports,d,e,e.exports,c,a),require.modules[a]._cached=e.exports,e.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var a=[],b=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return b&&window.addEventListener("message",function(b){if(b.source===window&&b.data==="browserify-tick"){b.stopPropagation();if(a.length>0){var c=a.shift();c()}}},!0),function(c){b?(a.push(c),window.postMessage("browserify-tick","*")):setTimeout(c,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(a){if(a==="evals")return require("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),require.define("path",function(a,b,c,d,e){function f(a,b){var c=[];for(var d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}function g(a,b){var c=0;for(var d=a.length;d>=0;d--){var e=a[d];e=="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}var h=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;c.resolve=function(){var a="",b=!1;for(var c=arguments.length;c>=-1&&!b;c--){var d=c>=0?arguments[c]:process.cwd();if(typeof d!="string"||!d)continue;a=d+"/"+a,b=d.charAt(0)==="/"}return a=g(f(a.split("/"),function(a){return!!a}),!b).join("/"),(b?"/":"")+a||"."},c.normalize=function(a){var b=a.charAt(0)==="/",c=a.slice(-1)==="/";return a=g(f(a.split("/"),function(a){return!!a}),!b).join("/"),!a&&!b&&(a="."),a&&c&&(a+="/"),(b?"/":"")+a},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(f(a,function(a,b){return a&&typeof a=="string"}).join("/"))},c.dirname=function(a){var b=h.exec(a)[1]||"",c=!1;return b?b.length===1||c&&b.length<=3&&b.charAt(1)===":"?b:b.substring(0,b.length-1):"."},c.basename=function(a,b){var c=h.exec(a)[2]||"";return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return h.exec(a)[3]||""}}),require.define("/package.json",function(a,b,c,d,e){b.exports={}}),require.define("/spire.io.js",function(a,b,c,d,e){!function(a,c){typeof define=="function"?define(c):typeof b!="undefined"?b.exports=c():this[a]=c()}("spire",function(){var b=function(a,b,c,d){this.name="XHRError",this.message=d||"XHRError",this.xhr=a,this.textStatus=b,this.status=a?a.status||a.statusCode:null};b.prototype=new Error,b.prototype.constructor=b;var c={options:{url:"http://api.spire.io",version:"1.0",timeout:3e4},cache:{},isConnecting:!1,headers:{},messages:{queue:[]},accounts:{},account:{},requests:{description:{},sessions:{},channels:{},subscriptions:{},messages:{},accounts:{},billing:{}}};if(typeof window!="undefined")c.ajax=a("reqwest");else{var d=a("request");c.ajax=function(a){a.headers=a.headers||{},a.method=a.method.toLowerCase();if(a.data)if(a.method==="put"||a.method==="post")typeof a.data=="string"?a.body=a.data:a.body=JSON.stringify(a.data);else{var b=!0;for(var c in a.data)a.url+=b?"?":"&",a.url+=c+"="+a.data[c],b=!1}var e=function(b,c,d){if(b)return a.error(c,c.statusCode,b);if(c.statusCode>=400)return a.error(c,c.statusCode,c.statusCode);a.type==="json"&&(d=JSON.parse(d)),a.success(d)};return a.type==="json"&&(a.headers.Accept||(a.headers.Accept="application/json")),d(a,e)}}return c.headers.authorization=function(a){return["Capability",a.capability].join(" ")},c.headers.mediaType=function(a){return c.schema[c.options.version][a].mediaType},c.messages.subscribe=function(a,b){c.connect(function(d,e){if(d)return b(d);var f={session:e,name:a};c.requests.channels.create(f,function(d,f){if(d)return d.status===409?c.requests.sessions.get(e,function(d,e){d&&b(d);var f=e.resources.channels.resources[a];c.requests.channels.get(f,function(a,d){var f={channels:[d],events:["messages"],session:e};c.requests.subscriptions.create(f,function(a,d){if(a)return b(a);var e={subscription:d},f=0,g=function(){f++;if(c.options._maxSubscriptionCallCount<f)return;c.requests.subscriptions.get(e,function(a,c){if(a)return b(a);c.messages.length>0&&b(null,c.messages),g()})};g()})})}):b(d);var g={channels:[f],events:["messages"],session:e};c.requests.subscriptions.create(g,function(a,d){if(a)return b(a);var e={subscription:d},f=0,g=function(){f++;if(c.options._maxSubscriptionCallCount<f)return;c.requests.subscriptions.get(e,function(a,c){if(a)return b(a);c.messages.length>0&&b(null,c.messages),g()})};g()})})})},c.messages.publish=function(a,b){if(c.isConnecting){c.messages.queue.push({message:a,callback:b});return}c.connect(function(d,e){if(d)return b(d);var f={session:e,name:a.channel};c.requests.channels.create(f,function(d,f){var g={session:e,name:a.channel};if(d)return d.status===409?c.requests.sessions.get(e,function(d,e){if(d){if(b)return b(d,null);throw d}var f=e.resources.channels.resources[a.channel];c.requests.channels.get(f,function(d,e){var f={channel:e,content:a.content};c.requests.messages.create(f,function(a,c){if(a)return b(a);b&&b(null,c)})})}):b(d,null);var g={channel:f,content:a.content};c.requests.messages.create(g,function(a,c){if(a)return b(a);b&&b(null,c)})})})},c.accounts.create=function(a,b){c.requests.description.get(function(d,e){if(d)return b(d);c.requests.accounts.create(a,b)})},c.accounts.update=function(a,b){c.requests.description.get(function(d,e){if(d)return b(d);c.requests.accounts.update(a,b)})},c.accounts.authenticate=function(a,b){c.requests.description.get(function(d,e){if(d)return b(d);var f={key:c.options.key,email:a.email,password:a.password};c.requests.sessions.create(f,b)})},c.connect=function(a){c.isConnecting=!0,c.requests.description.get(function(b,d){if(b)return a(b);var e={key:c.options.key},f=function(b,d){if(b)return a(b);c.isConnecting=!1,c.session=d;if(c.messages.queue.length>0){var e;while(e=c.messages.queue.pop())e&&c.messages.publish(e.message,e.callback)}return a(null,d)};c.session?f(null,c.session):c.requests.sessions.create(e,f)})},c.requests.description.get=function(a){if(c.resources){var d={resources:c.resources,schema:c.schema};return a(null,d)}c.ajax({method:"GET",url:c.options.url,type:"json",error:function(c,d,e){var f=new b(c,d,e);a(f)},success:function(b,d,e){c.resources=b.resources,c.schema=b.schema,a(null,b)}})},c.requests.sessions.get=function(a,d){c.ajax({method:"get",url:a.url,beforeSend:function(a){a.withCredentials=!0},headers:{Accept:c.headers.mediaType("session"),Authorization:c.headers.authorization(a)},type:"json",error:function(a,c,e){var f=new b(a,c,e);d(f)},success:function(a,b,c){d(null,a)}})},c.requests.sessions.create=function(a,d){if(!a.key&&typeof a.email!="string"&&typeof a.password!="string"){var e=["You need a key to do that! Try doing this:","   spire.options.key = <your account key>"].join("\n");throw new Error(e)}a.email&&a.password&&(a.key=null),c.ajax({method:"post",url:c.resources.sessions.url,beforeSend:function(a){a.withCredentials=!0},headers:{"Content-Type":c.headers.mediaType("account"),Accept:c.headers.mediaType("session")},data:JSON.stringify(a),type:"json",error:function(a,c,e){var f=new b(a,c,e);d(f)},success:function(a,b,c){d(null,a)}})},c.requests.channels.get=function(a,d){c.ajax({method:"get",url:a.url,beforeSend:function(a){a.withCredentials=!0},headers:{Accept:c.headers.mediaType("channel"),Authorization:c.headers.authorization(a)},type:"json",error:function(a,c,e){var f=new b(a,c,e);d(f,null)},success:function(a,b,c){d(null,a)}})},c.requests.channels.create=function(a,d){var e=a.session.resources.channels,f=a.name;c.ajax({method:"post",url:e.url,beforeSend:function(a){a.withCredentials=!0},headers:{"Content-Type":c.headers.mediaType("channel"),Accept:c.headers.mediaType("channel"),Authorization:c.headers.authorization(e)},data:JSON.stringify({name:f}),type:"json",error:function(a,c,e){var f=new b(a,c,e);d(f)},success:function(a,b,c){d(null,a)}})},c.requests.subscriptions.create=function(a,d){var e=a.session.resources.subscriptions,f={events:a.events,channels:[]};for(var g=0;g<a.channels.length;g++)f.channels.push(a.channels[g].url);c.ajax({method:"post",url:e.url,beforeSend:function(a){a.withCredentials=!0},headers:{"Content-Type":c.headers.mediaType("subscription"),Accept:c.headers.mediaType("subscription"),Authorization:c.headers.authorization(e)},data:JSON.stringify(f),type:"json",error:function(a,c,e){var f=new b(a,c,e);d(f)},success:function(a,b,c){d(null,a)}})},c.requests.subscriptions.get=function(a,d){var e=a.subscription;data={timeout:a.timeout||c.options.timeout/1e3},e["last-message"]&&(data["last-message"]=e["last-message"]),c.ajax({method:"get",url:e.url,beforeSend:function(a){a.withCredentials=!0},headers:{"Content-Type":c.headers.mediaType("events"),Accept:c.headers.mediaType("events"),Authorization:c.headers.authorization(e)},data:data,type:"json",error:function(a,c,e){if(e==="timeout")d(null,{messages:[]});else{var f=new b(a,c,e);d(f)}},success:function(a,b,c){var f=a.messages.length;f>0&&(e["last-message"]=a.messages[f-1].timestamp),d(null,a)}})},c.requests.messages.create=function(a,d){var e=a.channel,f=a.content;c.ajax({method:"post",url:e.url,beforeSend:function(a){a.withCredentials=!0},headers:{"Content-Type":c.headers.mediaType("message"),Accept:c.headers.mediaType("message"),Authorization:c.headers.authorization(e)},data:JSON.stringify({content:f}),type:"json",error:function(a,c,e){var f=new b(a,c,e);d(f)},success:function(a,b,c){d(null,a)}})},c.requests.accounts.create=function(a,d){c.ajax({method:"post",url:c.resources.accounts.url,headers:{"Content-Type":c.headers.mediaType("account"),Accept:c.headers.mediaType("session")},data:JSON.stringify(a),type:"json",success:function(a,b,c){d(null,a)},error:function(a,c,e){var f=new b(a,c,e);d(f)}})},c.requests.accounts.update=function(a,d){c.ajax({method:"put",url:a.url,headers:{"Content-Type":c.headers.mediaType("account"),Accept:c.headers.mediaType("account"),Authorization:c.headers.authorization(a)},data:JSON.stringify(a),type:"json",success:function(a,b,c){d(null,a)},error:function(a,c,e){var f=new b(a,c,e);d(f)}})},c.requests.accounts.reset=function(a,d){c.ajax({method:"post",url:a.url,headers:{"Content-Type":c.headers.mediaType("account"),Accept:c.headers.mediaType("account"),Authorization:c.headers.authorization(a)},type:"json",success:function(a,b,c){d(null,a)},error:function(a,c,e){var f=new b(a,c,e);d(f)}})},c.requests.billing.get=function(a){c.ajax({method:"GET",url:c.resources.billing.url,headers:{"Content-Type":c.headers.mediaType("billing"),Accept:c.headers.mediaType("billing")},type:"json",error:function(c,d,e){var f=new b(c,d,e);a(f)},success:function(b,c,d){a(null,b)}})},c})}),require.define("/node_modules/reqwest/package.json",function(a,b,c,d,e){b.exports={main:"./reqwest.js"}}),require.define("/node_modules/reqwest/reqwest.js",function(require,module,exports,__dirname,__filename){!function(a,b){typeof define=="function"?define(b):typeof module!="undefined"?module.exports=b():this[a]=b()}("reqwest",function(){function handleReadyState(a,b,c){return function(){a&&a[readyState]==4&&(twoHundo.test(a.status)?b(a):c(a))}}function setHeaders(a,b){var c=b.headers||{};c.Accept=c.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],!b.crossOrigin&&!c[requestedWith]&&(c[requestedWith]=defaultHeaders.requestedWith),c[contentType]||(c[contentType]=b.contentType||defaultHeaders.contentType);for(var d in c)c.hasOwnProperty(d)&&a.setRequestHeader(d,c[d])}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||"reqwest_"+e,h=new RegExp("("+f+")=(.+)(&|$)"),i=d.match(h),j=doc.createElement("script"),k=0;i?i[2]==="?"?d=d.replace(h,"$1="+g+"$3"):g=i[2]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,typeof j.onreadystatechange!="undefined"&&(j.event="onclick",j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){if(j[readyState]&&j[readyState]!=="complete"&&j[readyState]!=="loaded"||k)return!1;j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),a.success&&a.success(lastValue),lastValue=undefined,head.removeChild(j),k=1},head.appendChild(j)}function getRequest(a,b,c){var d=(a.method||"GET").toUpperCase(),e=typeof a=="string"?a:a.url,f=a.processData!==!1&&a.data&&typeof a.data!="string"?reqwest.toQueryString(a.data):a.data||null;(a.type=="jsonp"||d=="GET")&&f&&(e=urlappend(e,f))&&(f=null);if(a.type=="jsonp")return handleJsonp(a,b,c,e);var g=xhr();return g.open(d,e,!0),setHeaders(g,a),g.onreadystatechange=handleReadyState(g,b,c),a.before&&a.before(g),g.send(f),g}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){var b=a.match(/\.(json|jsonp|html|xml)(\?|$)/);return b?b[1]:"js"}function init(o,fn){function complete(a){o.timeout&&clearTimeout(self.timeout),self.timeout=null,o.complete&&o.complete(a)}function success(resp){var r=resp.responseText;if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r}fn(resp),o.success&&o.success(resp),complete(resp)}function error(a,b,c){o.error&&o.error(a,b,c),complete(a)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),this.request=getRequest(o,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c=a.name,d=a.tagName.toLowerCase(),e=function(a){a&&!a.disabled&&b(c,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(a.disabled||!c)return;switch(d){case"input":if(!/reset|button|image|file/i.test(a.type)){var f=/checkbox/i.test(a.type),g=/radio/i.test(a.type),h=a.value;(!f&&!g||a.checked)&&b(c,normalize(f&&h===""?"on":h))}break;case"textarea":b(c,normalize(a.value));break;case"select":if(a.type.toLowerCase()==="select-one")e(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(var i=0;a.length&&i<a.length;i++)a.options[i].selected&&e(a.options[i])}}function eachFormElement(){var a=this,b,c,d,e=function(b,c){for(var e=0;e<c.length;e++){var f=b[byTag](c[e]);for(d=0;d<f.length;d++)serial(f[d],a)}};for(c=0;c<arguments.length;c++)b=arguments[c],/input|select|textarea/i.test(b.tagName)&&serial(b,a),e(b,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}var context=this,win=window,doc=document,old=context.reqwest,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,lastValue,xmlHttpRequest="XMLHttpRequest",defaultHeaders={contentType:"application/x-www-form-urlencoded",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},requestedWith:xmlHttpRequest},xhr=xmlHttpRequest in win?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}};var isArray=typeof Array.isArray=="function"?Array.isArray:function(a){return a instanceof Array};return reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(arguments.length===0)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),a=="map"?b=serializeHash:a=="array"?b=reqwest.serializeArray:b=serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a){var b="",c,d=encodeURIComponent,e=function(a,c){b+=d(a)+"="+d(c)+"&"};if(isArray(a))for(c=0;a&&c<a.length;c++)e(a[c].name,a[c].value);else for(var f in a){if(!Object.hasOwnProperty.call(a,f))continue;var g=a[f];if(isArray(g))for(c=0;c<g.length;c++)e(f,g[c]);else e(f,a[f])}return b.replace(/&$/,"").replace(/%20/g,"+")},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.noConflict=function(){return context.reqwest=old,this},reqwest})}),require.alias("./spire.io.js","/node_modules/spire")